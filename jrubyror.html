<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="generator" content="AsciiDoc 8.6.8">
<title>Ruby on Rails: Erste Schritte (mit JRuby)</title>
<style type="text/css">
/* Shared CSS for AsciiDoc xhtml11 and html5 backends */

/* Default font. */
body {
  font-family: Georgia,serif;
}

/* Title font. */
h1, h2, h3, h4, h5, h6,
div.title, caption.title,
thead, p.table.header,
#toctitle,
#author, #revnumber, #revdate, #revremark,
#footer {
  font-family: Arial,Helvetica,sans-serif;
}

body {
  margin: 1em 5% 1em 5%;
}

a {
  color: blue;
  text-decoration: underline;
}
a:visited {
  color: fuchsia;
}

em {
  font-style: italic;
  color: navy;
}

strong {
  font-weight: bold;
  color: #083194;
}

h1, h2, h3, h4, h5, h6 {
  color: #527bbd;
  margin-top: 1.2em;
  margin-bottom: 0.5em;
  line-height: 1.3;
}

h1, h2, h3 {
  border-bottom: 2px solid silver;
}
h2 {
  padding-top: 0.5em;
}
h3 {
  float: left;
}
h3 + * {
  clear: left;
}
h5 {
  font-size: 1.0em;
}

div.sectionbody {
  margin-left: 0;
}

hr {
  border: 1px solid silver;
}

p {
  margin-top: 0.5em;
  margin-bottom: 0.5em;
}

ul, ol, li > p {
  margin-top: 0;
}
ul > li     { color: #aaa; }
ul > li > * { color: black; }

.monospaced, code, pre {
  font-family: "Courier New", Courier, monospace;
  font-size: inherit;
  color: navy;
  padding: 0;
  margin: 0;
}


#author {
  color: #527bbd;
  font-weight: bold;
  font-size: 1.1em;
}
#email {
}
#revnumber, #revdate, #revremark {
}

#footer {
  font-size: small;
  border-top: 2px solid silver;
  padding-top: 0.5em;
  margin-top: 4.0em;
}
#footer-text {
  float: left;
  padding-bottom: 0.5em;
}
#footer-badges {
  float: right;
  padding-bottom: 0.5em;
}

#preamble {
  margin-top: 1.5em;
  margin-bottom: 1.5em;
}
div.imageblock, div.exampleblock, div.verseblock,
div.quoteblock, div.literalblock, div.listingblock, div.sidebarblock,
div.admonitionblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
div.admonitionblock {
  margin-top: 2.0em;
  margin-bottom: 2.0em;
  margin-right: 10%;
  color: #606060;
}

div.content { /* Block element content. */
  padding: 0;
}

/* Block element titles. */
div.title, caption.title {
  color: #527bbd;
  font-weight: bold;
  text-align: left;
  margin-top: 1.0em;
  margin-bottom: 0.5em;
}
div.title + * {
  margin-top: 0;
}

td div.title:first-child {
  margin-top: 0.0em;
}
div.content div.title:first-child {
  margin-top: 0.0em;
}
div.content + div.title {
  margin-top: 0.0em;
}

div.sidebarblock > div.content {
  background: #ffffee;
  border: 1px solid #dddddd;
  border-left: 4px solid #f0f0f0;
  padding: 0.5em;
}

div.listingblock > div.content {
  border: 1px solid #dddddd;
  border-left: 5px solid #f0f0f0;
  background: #f8f8f8;
  padding: 0.5em;
}

div.quoteblock, div.verseblock {
  padding-left: 1.0em;
  margin-left: 1.0em;
  margin-right: 10%;
  border-left: 5px solid #f0f0f0;
  color: #888;
}

div.quoteblock > div.attribution {
  padding-top: 0.5em;
  text-align: right;
}

div.verseblock > pre.content {
  font-family: inherit;
  font-size: inherit;
}
div.verseblock > div.attribution {
  padding-top: 0.75em;
  text-align: left;
}
/* DEPRECATED: Pre version 8.2.7 verse style literal block. */
div.verseblock + div.attribution {
  text-align: left;
}

div.admonitionblock .icon {
  vertical-align: top;
  font-size: 1.1em;
  font-weight: bold;
  text-decoration: underline;
  color: #527bbd;
  padding-right: 0.5em;
}
div.admonitionblock td.content {
  padding-left: 0.5em;
  border-left: 3px solid #dddddd;
}

div.exampleblock > div.content {
  border-left: 3px solid #dddddd;
  padding-left: 0.5em;
}

div.imageblock div.content { padding-left: 0; }
span.image img { border-style: none; }
a.image:visited { color: white; }

dl {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
dt {
  margin-top: 0.5em;
  margin-bottom: 0;
  font-style: normal;
  color: navy;
}
dd > *:first-child {
  margin-top: 0.1em;
}

ul, ol {
    list-style-position: outside;
}
ol.arabic {
  list-style-type: decimal;
}
ol.loweralpha {
  list-style-type: lower-alpha;
}
ol.upperalpha {
  list-style-type: upper-alpha;
}
ol.lowerroman {
  list-style-type: lower-roman;
}
ol.upperroman {
  list-style-type: upper-roman;
}

div.compact ul, div.compact ol,
div.compact p, div.compact p,
div.compact div, div.compact div {
  margin-top: 0.1em;
  margin-bottom: 0.1em;
}

tfoot {
  font-weight: bold;
}
td > div.verse {
  white-space: pre;
}

div.hdlist {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
div.hdlist tr {
  padding-bottom: 15px;
}
dt.hdlist1.strong, td.hdlist1.strong {
  font-weight: bold;
}
td.hdlist1 {
  vertical-align: top;
  font-style: normal;
  padding-right: 0.8em;
  color: navy;
}
td.hdlist2 {
  vertical-align: top;
}
div.hdlist.compact tr {
  margin: 0;
  padding-bottom: 0;
}

.comment {
  background: yellow;
}

.footnote, .footnoteref {
  font-size: 0.8em;
}

span.footnote, span.footnoteref {
  vertical-align: super;
}

#footnotes {
  margin: 20px 0 20px 0;
  padding: 7px 0 0 0;
}

#footnotes div.footnote {
  margin: 0 0 5px 0;
}

#footnotes hr {
  border: none;
  border-top: 1px solid silver;
  height: 1px;
  text-align: left;
  margin-left: 0;
  width: 20%;
  min-width: 100px;
}

div.colist td {
  padding-right: 0.5em;
  padding-bottom: 0.3em;
  vertical-align: top;
}
div.colist td img {
  margin-top: 0.3em;
}

@media print {
  #footer-badges { display: none; }
}

#toc {
  margin-bottom: 2.5em;
}

#toctitle {
  color: #527bbd;
  font-size: 1.1em;
  font-weight: bold;
  margin-top: 1.0em;
  margin-bottom: 0.1em;
}

div.toclevel0, div.toclevel1, div.toclevel2, div.toclevel3, div.toclevel4 {
  margin-top: 0;
  margin-bottom: 0;
}
div.toclevel2 {
  margin-left: 2em;
  font-size: 0.9em;
}
div.toclevel3 {
  margin-left: 4em;
  font-size: 0.9em;
}
div.toclevel4 {
  margin-left: 6em;
  font-size: 0.9em;
}

span.aqua { color: aqua; }
span.black { color: black; }
span.blue { color: blue; }
span.fuchsia { color: fuchsia; }
span.gray { color: gray; }
span.green { color: green; }
span.lime { color: lime; }
span.maroon { color: maroon; }
span.navy { color: navy; }
span.olive { color: olive; }
span.purple { color: purple; }
span.red { color: red; }
span.silver { color: silver; }
span.teal { color: teal; }
span.white { color: white; }
span.yellow { color: yellow; }

span.aqua-background { background: aqua; }
span.black-background { background: black; }
span.blue-background { background: blue; }
span.fuchsia-background { background: fuchsia; }
span.gray-background { background: gray; }
span.green-background { background: green; }
span.lime-background { background: lime; }
span.maroon-background { background: maroon; }
span.navy-background { background: navy; }
span.olive-background { background: olive; }
span.purple-background { background: purple; }
span.red-background { background: red; }
span.silver-background { background: silver; }
span.teal-background { background: teal; }
span.white-background { background: white; }
span.yellow-background { background: yellow; }

span.big { font-size: 2em; }
span.small { font-size: 0.6em; }

span.underline { text-decoration: underline; }
span.overline { text-decoration: overline; }
span.line-through { text-decoration: line-through; }

div.unbreakable { page-break-inside: avoid; }


/*
 * xhtml11 specific
 *
 * */

div.tableblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
div.tableblock > table {
  border: 3px solid #527bbd;
}
thead, p.table.header {
  font-weight: bold;
  color: #527bbd;
}
p.table {
  margin-top: 0;
}
/* Because the table frame attribute is overriden by CSS in most browsers. */
div.tableblock > table[frame="void"] {
  border-style: none;
}
div.tableblock > table[frame="hsides"] {
  border-left-style: none;
  border-right-style: none;
}
div.tableblock > table[frame="vsides"] {
  border-top-style: none;
  border-bottom-style: none;
}


/*
 * html5 specific
 *
 * */

table.tableblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
thead, p.tableblock.header {
  font-weight: bold;
  color: #527bbd;
}
p.tableblock {
  margin-top: 0;
}
table.tableblock {
  border-width: 3px;
  border-spacing: 0px;
  border-style: solid;
  border-color: #527bbd;
  border-collapse: collapse;
}
th.tableblock, td.tableblock {
  border-width: 1px;
  padding: 4px;
  border-style: solid;
  border-color: #527bbd;
}

table.tableblock.frame-topbot {
  border-left-style: hidden;
  border-right-style: hidden;
}
table.tableblock.frame-sides {
  border-top-style: hidden;
  border-bottom-style: hidden;
}
table.tableblock.frame-none {
  border-style: hidden;
}

th.tableblock.halign-left, td.tableblock.halign-left {
  text-align: left;
}
th.tableblock.halign-center, td.tableblock.halign-center {
  text-align: center;
}
th.tableblock.halign-right, td.tableblock.halign-right {
  text-align: right;
}

th.tableblock.valign-top, td.tableblock.valign-top {
  vertical-align: top;
}
th.tableblock.valign-middle, td.tableblock.valign-middle {
  vertical-align: middle;
}
th.tableblock.valign-bottom, td.tableblock.valign-bottom {
  vertical-align: bottom;
}


/*
 * manpage specific
 *
 * */

body.manpage h1 {
  padding-top: 0.5em;
  padding-bottom: 0.5em;
  border-top: 2px solid silver;
  border-bottom: 2px solid silver;
}
body.manpage h2 {
  border-style: none;
}
body.manpage div.sectionbody {
  margin-left: 3em;
}

@media print {
  body.manpage div#toc { display: none; }
}


</style>
<script type="text/javascript">
/*<![CDATA[*/
var asciidoc = {  // Namespace.

/////////////////////////////////////////////////////////////////////
// Table Of Contents generator
/////////////////////////////////////////////////////////////////////

/* Author: Mihai Bazon, September 2002
 * http://students.infoiasi.ro/~mishoo
 *
 * Table Of Content generator
 * Version: 0.4
 *
 * Feel free to use this script under the terms of the GNU General Public
 * License, as long as you do not remove or alter this notice.
 */

 /* modified by Troy D. Hanson, September 2006. License: GPL */
 /* modified by Stuart Rackham, 2006, 2009. License: GPL */

// toclevels = 1..4.
toc: function (toclevels) {

  function getText(el) {
    var text = "";
    for (var i = el.firstChild; i != null; i = i.nextSibling) {
      if (i.nodeType == 3 /* Node.TEXT_NODE */) // IE doesn't speak constants.
        text += i.data;
      else if (i.firstChild != null)
        text += getText(i);
    }
    return text;
  }

  function TocEntry(el, text, toclevel) {
    this.element = el;
    this.text = text;
    this.toclevel = toclevel;
  }

  function tocEntries(el, toclevels) {
    var result = new Array;
    var re = new RegExp('[hH]([1-'+(toclevels+1)+'])');
    // Function that scans the DOM tree for header elements (the DOM2
    // nodeIterator API would be a better technique but not supported by all
    // browsers).
    var iterate = function (el) {
      for (var i = el.firstChild; i != null; i = i.nextSibling) {
        if (i.nodeType == 1 /* Node.ELEMENT_NODE */) {
          var mo = re.exec(i.tagName);
          if (mo && (i.getAttribute("class") || i.getAttribute("className")) != "float") {
            result[result.length] = new TocEntry(i, getText(i), mo[1]-1);
          }
          iterate(i);
        }
      }
    }
    iterate(el);
    return result;
  }

  var toc = document.getElementById("toc");
  if (!toc) {
    return;
  }

  // Delete existing TOC entries in case we're reloading the TOC.
  var tocEntriesToRemove = [];
  var i;
  for (i = 0; i < toc.childNodes.length; i++) {
    var entry = toc.childNodes[i];
    if (entry.nodeName.toLowerCase() == 'div'
     && entry.getAttribute("class")
     && entry.getAttribute("class").match(/^toclevel/))
      tocEntriesToRemove.push(entry);
  }
  for (i = 0; i < tocEntriesToRemove.length; i++) {
    toc.removeChild(tocEntriesToRemove[i]);
  }

  // Rebuild TOC entries.
  var entries = tocEntries(document.getElementById("content"), toclevels);
  for (var i = 0; i < entries.length; ++i) {
    var entry = entries[i];
    if (entry.element.id == "")
      entry.element.id = "_toc_" + i;
    var a = document.createElement("a");
    a.href = "#" + entry.element.id;
    a.appendChild(document.createTextNode(entry.text));
    var div = document.createElement("div");
    div.appendChild(a);
    div.className = "toclevel" + entry.toclevel;
    toc.appendChild(div);
  }
  if (entries.length == 0)
    toc.parentNode.removeChild(toc);
},


/////////////////////////////////////////////////////////////////////
// Footnotes generator
/////////////////////////////////////////////////////////////////////

/* Based on footnote generation code from:
 * http://www.brandspankingnew.net/archive/2005/07/format_footnote.html
 */

footnotes: function () {
  // Delete existing footnote entries in case we're reloading the footnodes.
  var i;
  var noteholder = document.getElementById("footnotes");
  if (!noteholder) {
    return;
  }
  var entriesToRemove = [];
  for (i = 0; i < noteholder.childNodes.length; i++) {
    var entry = noteholder.childNodes[i];
    if (entry.nodeName.toLowerCase() == 'div' && entry.getAttribute("class") == "footnote")
      entriesToRemove.push(entry);
  }
  for (i = 0; i < entriesToRemove.length; i++) {
    noteholder.removeChild(entriesToRemove[i]);
  }

  // Rebuild footnote entries.
  var cont = document.getElementById("content");
  var spans = cont.getElementsByTagName("span");
  var refs = {};
  var n = 0;
  for (i=0; i<spans.length; i++) {
    if (spans[i].className == "footnote") {
      n++;
      var note = spans[i].getAttribute("data-note");
      if (!note) {
        // Use [\s\S] in place of . so multi-line matches work.
        // Because JavaScript has no s (dotall) regex flag.
        note = spans[i].innerHTML.match(/\s*\[([\s\S]*)]\s*/)[1];
        spans[i].innerHTML =
          "[<a id='_footnoteref_" + n + "' href='#_footnote_" + n +
          "' title='View footnote' class='footnote'>" + n + "</a>]";
        spans[i].setAttribute("data-note", note);
      }
      noteholder.innerHTML +=
        "<div class='footnote' id='_footnote_" + n + "'>" +
        "<a href='#_footnoteref_" + n + "' title='Return to text'>" +
        n + "</a>. " + note + "</div>";
      var id =spans[i].getAttribute("id");
      if (id != null) refs["#"+id] = n;
    }
  }
  if (n == 0)
    noteholder.parentNode.removeChild(noteholder);
  else {
    // Process footnoterefs.
    for (i=0; i<spans.length; i++) {
      if (spans[i].className == "footnoteref") {
        var href = spans[i].getElementsByTagName("a")[0].getAttribute("href");
        href = href.match(/#.*/)[0];  // Because IE return full URL.
        n = refs[href];
        spans[i].innerHTML =
          "[<a href='#_footnote_" + n +
          "' title='View footnote' class='footnote'>" + n + "</a>]";
      }
    }
  }
},

install: function(toclevels) {
  var timerId;

  function reinstall() {
    asciidoc.footnotes();
    if (toclevels) {
      asciidoc.toc(toclevels);
    }
  }

  function reinstallAndRemoveTimer() {
    clearInterval(timerId);
    reinstall();
  }

  timerId = setInterval(reinstall, 500);
  if (document.addEventListener)
    document.addEventListener("DOMContentLoaded", reinstallAndRemoveTimer, false);
  else
    window.onload = reinstallAndRemoveTimer;
}

}
asciidoc.install(2);
/*]]>*/
</script>
</head>
<body class="article">
<div id="header">
<h1>Ruby on Rails: Erste Schritte (mit JRuby)</h1>
<span id="author">Karl-Heinz Köther</span><br>
<span id="email" class="monospaced">&lt;<a href="mailto:&#107;&#104;&#107;&#111;&#101;&#116;&#104;&#101;&#114;&#064;&#107;&#097;&#104;&#119;&#101;&#098;&#046;&#100;&#101;">&#107;&#104;&#107;&#111;&#101;&#116;&#104;&#101;&#114;&#064;&#107;&#097;&#104;&#119;&#101;&#098;&#046;&#100;&#101;</a>&gt;</span><br>
<div id="toc">
  <div id="toctitle">Table of Contents</div>
  <noscript><p><b>JavaScript must be enabled in your browser to display the table of contents.</b></p></noscript>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph"><p>Version 1.8.1, Juni 2013, <a href="#_changelog">[Changelog]</a></p></div>
</div>
</div>
<div class="sect1">
<h2 id="_abstract">Abstract</h2>
<div class="sectionbody">
<div class="paragraph"><p>Die folgenden Schritte stellen die Funktionsfähigkeit der Installation
von <em>JRuby</em> und <em>Ruby on Rails</em> (kurz: <em>Rails</em>) sicher.</p></div>
<div class="paragraph"><p></p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img src="./images/icons/caution.png" alt="Caution">
</td>
<td class="content">
<div class="paragraph"><p>Zu beachten ist, dass so ein Dokument zum Einen nie abschliessend
sein kann, und zum Anderen bestimmte Konfigurationen anders, oder
auf einem anderem Weg durchgeführt werden können.<br>
Gerne nehme ich Verbesserungsvorschläge entgegen.</p></div>
<div class="paragraph"><p>Es gilt wie immer: Verwendung der Anleitung auf eigene Gefahr.</p></div>
</td>
</tr></table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_vorraussetzungen">Vorraussetzungen</h2>
<div class="sectionbody">
<div class="paragraph"><p><em>JRuby</em> und <em>Ruby on Rails</em> sind wie
in <a href="jruby.html">Installation in Ubuntu: JRuby 1.7.4, Ruby on Rails 3.2.13</a>
beschrieben durchgeführt worden.</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>$ which jruby
/opt/JRuby/sid/current/bin/jruby

$ jruby -v
jruby 1.7.4 (1.9.3p392) 2013-05-16 2390d3b on OpenJDK 64-Bit Server VM 1.7.0_21-b02 [linux-amd64]

$ jruby -v --1.8   <img src="./images/icons/callouts/1.png" alt="1">
jruby 1.7.4 (ruby-1.8.7p370) 2013-05-16 2390d3b on OpenJDK 64-Bit Server VM 1.7.0_21-b02 [linux-amd64]

$ which rails
/opt/JRuby/sid/current/bin/rails

$ jruby -S rails -v   <img src="./images/icons/callouts/2.png" alt="2">
Rails 3.2.13

$ rails -v     <img src="./images/icons/callouts/3.png" alt="3">
Rails 3.2.13</pre>
</div></div>
<div class="colist arabic"><table>
<tr><td><img src="./images/icons/callouts/1.png" alt="1"></td><td>
Die Installation <em>JRuby</em> enthält zwei (gleichberechtigte) Implementationen der
    Programmier-Sprache <em>Ruby</em>:<br>
    <em>Ruby 1.8.7-p370</em><br>
    <em>Ruby 1.9.3-p392</em> (default)
</td></tr>
<tr><td><img src="./images/icons/callouts/2.png" alt="2"></td><td>
Der Schalter <em>-S</em> führt dazu, daß für das Script zuerst
    das Verzeichnis JRUBY_HOME/bin geprüft wird - und
    dann der PATH.
</td></tr>
<tr><td><img src="./images/icons/callouts/3.png" alt="3"></td><td>
Solange wie die ausführbaren Programme von <em>JRuby on Rails</em> im PATH vorangestellt
    werden, kann auf <em>jruby -S</em> verzichtet werden.
</td></tr>
</table></div>
</div>
</div>
<div class="sect1">
<h2 id="_erste_schritte">Erste Schritte</h2>
<div class="sectionbody">
<div class="paragraph"><p>Die notwendigen Schritte werden auf der Kommandozeile durchgeführt.</p></div>
<div class="ulist"><div class="title">Vorgehensweise</div><ul>
<li>
<p>
Datenbanksystem wählen
</p>
</li>
<li>
<p>
Datenbank erstellen
</p>
</li>
<li>
<p>
Projektverzeichnis erstellen
</p>
</li>
<li>
<p>
Datenbankadapter konfigurieren
</p>
</li>
<li>
<p>
JavaScript-Runtime installieren
</p>
</li>
<li>
<p>
Aufruf der Webanwendung im Browser
</p>
</li>
</ul></div>
<div class="sect2">
<h3 id="_datenbanksystem_wählen">Datenbanksystem wählen</h3>
<div class="paragraph"><p>Für <em>Ruby on Rails</em> sind drei Datenbanksysteme zumindest erste Wahl für
die Entwicklung eines neuen Rails-Projektes:</p></div>
<div class="ulist"><ul>
<li>
<p>
<em>SqLite3</em><br>
  Ist in <em>Ruby on Rails</em> die Default-Datenbank.
</p>
</li>
<li>
<p>
<em>MySQL</em><br>
  Gut und schnell und überhaupt &#8230; überall verfügbar.
</p>
</li>
<li>
<p>
<em>PostgreSQL</em><br>
  Lupenreine OpenSource-Datenbanksystem für professionelle Anforderungen.<br>
  (Ähnliches Vorgehen wie mit MySQL.)
</p>
</li>
</ul></div>
<div class="paragraph"><p>Für die Datenbanksysteme <em>SqLite3</em> und <em>MySQL</em> sind die notwendigen Datenbankadapter
bereits installiert worden.</p></div>
</div>
<div class="sect2">
<h3 id="_datenbank_erstellen">Datenbank erstellen</h3>
<div class="paragraph"><p><em>SQLite3</em> ist eine Programmbibliothek, die ein relationales Datenbanksystem enthält.
Das bedeutet, der normale Aufwand an Administration für ein Datenbanksystem, sowie
für das Anlegen von Benutzern, einer Datenbank und dem Zuweisen von Rechten entfällt.</p></div>
<div class="paragraph"><p><em>MySQL</em> hat für die Administration des Datenbanksystems
verschiedene Programm-Angebote, unter anderem <em>phpMyAdmin</em> &#8230; aber eben auch
die Kommandozeile.</p></div>
<div class="paragraph"><p><em>PostgreSQL</em> hat für die Administration des Datenbanksystems
verschiedene Programm-Angebote, unter anderem <em>pgAdmin</em> &#8230; aber eben auch
die Kommandozeile.</p></div>
<div class="listingblock">
<div class="title">Anlegen eines Benutzer: <em>sid</em> (in MySQL)</div>
<div class="content monospaced">
<pre># mysql -uroot -p
Enter password:
Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 41
Server version: 5.5.22-0ubuntu1 (Ubuntu)

Copyright (c) 2000, 2011, Oracle and/or its affiliates. All rights reserved.

Oracle is a registered trademark of Oracle Corporation and/or its
affiliates. Other names may be trademarks of their respective
owners.

Type 'help;' or '\h' for help. Type '\c' to clear the current input statement.

mysql&gt; GRANT ALL PRIVILEGES ON *.* to 'sid'@'localhost'
    -&gt; IDENTIFIED BY 'GEHEIM';
Query OK, 0 rows affected (0.00 sec)

mysql&gt; exit</pre>
</div></div>
<div class="listingblock">
<div class="title">Erstellen einer Datenbank: <em>jmyapp_development</em> (in MySQL)</div>
<div class="content monospaced">
<pre>$ mysql -usid -p
Enter password:
Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 44
Server version: 5.5.22-0ubuntu1 (Ubuntu)

Copyright (c) 2000, 2011, Oracle and/or its affiliates. All rights reserved.

Oracle is a registered trademark of Oracle Corporation and/or its
affiliates. Other names may be trademarks of their respective
owners.

Type 'help;' or '\h' for help. Type '\c' to clear the current input statement.

mysql&gt; CREATE DATABASE jmyapp_development;
Query OK, 1 row affected (0.00 sec)

mysql&gt; exit
Bye</pre>
</div></div>
</div>
<div class="sect2">
<h3 id="_projektverzeichnis_erstellen">Projektverzeichnis erstellen</h3>
<div class="listingblock">
<div class="content monospaced">
<pre>$ cd
$ mkdir RailsDir

$ which rails
/opt/JRuby/sid/current/bin/rails

$ cd RailsDir
$ rails new jMyApp --database=mysql   <img src="./images/icons/callouts/1.png" alt="1">
      create
      create  README.rdoc
      create  Rakefile
      create  config.ru
      create  .gitignore
      create  Gemfile      <img src="./images/icons/callouts/2.png" alt="2">
      create  app
      create  app/assets/images/rails.png
 [...]
      create  config/database.yml   <img src="./images/icons/callouts/3.png" alt="3">
 [...]
      create  vendor/plugins
      create  vendor/plugins/.gitkeep
         run  bundle install    <img src="./images/icons/callouts/4.png" alt="4">
Fetching gem metadata from https://rubygems.org/...........
Fetching gem metadata from https://rubygems.org/..
Resolving dependencies...
Using rake (10.0.4)
Using i18n (0.6.1)
Using multi_json (1.7.5)
Using activesupport (3.2.13)
Using builder (3.0.4)
Using activemodel (3.2.13)
Using erubis (2.7.0)
Using journey (1.0.4)
Using rack (1.4.5)
Using rack-cache (1.2)
Using rack-test (0.6.2)
Using hike (1.2.2)
Using tilt (1.4.1)
Using sprockets (2.2.2)
Using actionpack (3.2.13)
Using mime-types (1.23)
Using polyglot (0.3.3)
Using treetop (1.4.12)
Using mail (2.5.4)
Using actionmailer (3.2.13)
Using arel (3.0.2)
Using tzinfo (0.3.37)
Using activerecord (3.2.13)
Using activerecord-jdbc-adapter (1.2.9)
Using jdbc-mysql (5.1.24)
Using activerecord-jdbcmysql-adapter (1.2.9)
Using activeresource (3.2.13)
Installing bouncy-castle-java (1.5.0147)
Using bundler (1.3.5)
Installing coffee-script-source (1.6.2)
Installing execjs (1.4.0)
Installing coffee-script (2.2.0)
Using rack-ssl (1.3.3)
Using json (1.8.0)
Using rdoc (3.12.2)
Using thor (0.18.1)
Using railties (3.2.13)
Installing coffee-rails (3.2.2)
Installing jquery-rails (3.0.0)
Installing jruby-openssl (0.8.8)
Using rails (3.2.13)
Installing sass (3.2.9)
Installing sass-rails (3.2.6)
Installing therubyrhino_jar (1.7.4)
Installing therubyrhino (2.0.2)
Installing uglifier (2.1.1)
Your bundle is complete!
Use `bundle show [gemname]` to see where a bundled gem is installed.</pre>
</div></div>
<div class="colist arabic"><table>
<tr><td><img src="./images/icons/callouts/1.png" alt="1"></td><td>
Für das Datenbanksystem <em>SqLite3</em> verkürzt sich der Aufruf:
    <em>rails new myapp</em>
</td></tr>
<tr><td><img src="./images/icons/callouts/2.png" alt="2"></td><td>
Die zu diesem Zeitpunkt benötigten RubyGems und deren Abhängigkeiten
    untereinander entnehmen Sie der Datei <em>Gemfile</em>.
</td></tr>
<tr><td><img src="./images/icons/callouts/3.png" alt="3"></td><td>
Konfigurationsdatei mit den Einstellungen für den
    Datenbankzugriff (Datenbankadapter).
</td></tr>
<tr><td><img src="./images/icons/callouts/4.png" alt="4"></td><td>
<em>JRuby</em> ist eine benutzereigene Installation - somit können benötigte
    RubyGems (siehe <em>Gemfile</em>) automatisch installiert werden.<br>
    <em>bouncy-castle-java</em>, <em>coffee-script-source</em>, <em>execjs</em>, <em>coffee_script</em>,
    <em>coffee-rails</em>, <em>jquery-rails</em>, <em>jruby-openssl</em>,
    <em>sass</em>, <em>sass-rails</em>, <em>therubyrhino_jar</em>, <em>therubyrhino</em>, <em>uglifier</em>
</td></tr>
</table></div>
<div class="listingblock">
<div class="title">Gemfile</div>
<div class="content monospaced">
<pre>source 'https://rubygems.org'

gem 'rails', '3.2.13'

# Bundle edge Rails instead:
# gem 'rails', :git =&gt; 'git://github.com/rails/rails.git'

gem 'activerecord-jdbcmysql-adapter'

gem 'jruby-openssl'

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '~&gt; 3.2.3'   <img src="./images/icons/callouts/1.png" alt="1">
  gem 'coffee-rails', '~&gt; 3.2.1'   <img src="./images/icons/callouts/2.png" alt="2">

  # See https://github.com/sstephenson/execjs#readme for more supported runtimes
  gem 'therubyrhino'   <img src="./images/icons/callouts/3.png" alt="3">

  gem 'uglifier', '&gt;= 1.0.3'
end

gem 'jquery-rails'
 [...]</pre>
</div></div>
<div class="colist arabic"><table>
<tr><td><img src="./images/icons/callouts/1.png" alt="1"></td><td>
Der Spezifizierer <em>~&gt; 3.2.3</em> ist identisch mit
    den Bedingungen <em>&gt;= 3.2.3</em> und <em>&lt; 3.3</em>.
</td></tr>
<tr><td><img src="./images/icons/callouts/2.png" alt="2"></td><td>
Der Spezifizierer <em>~&gt; 3.2.1</em> ist identisch mit
    den Bedingungen <em>&gt;= 3.2.1</em> und <em>&lt; 3.3</em>.
</td></tr>
<tr><td><img src="./images/icons/callouts/3.png" alt="3"></td><td>
RubyGem <em>therubyrhino</em>: JavaScript-Interpreter
</td></tr>
</table></div>
<div class="listingblock">
<div class="title">Prüfen der Abhängigkeiten im <em>Gemfile</em></div>
<div class="content monospaced">
<pre>$ cd jmyapp

$ bundle check
The Gemfile's dependencies are satisfied</pre>
</div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img src="./images/icons/note.png" alt="Note">
</td>
<td class="content">
<div class="paragraph"><p><em>CoffeeScript</em> ist seit <em>Ruby on Rails</em> v3.1 Standard.</p></div>
</td>
</tr></table>
</div>
</div>
<div class="sect2">
<h3 id="_datenbankadapter_konfigurieren">Datenbankadapter konfigurieren</h3>
<div class="listingblock">
<div class="title">config/database.yml: sqlite3</div>
<div class="content monospaced">
<pre>[...]
development:
  adapter: sqlite3
  database: db/development.sqlite3   <img src="./images/icons/callouts/1.png" alt="1">
[...]</pre>
</div></div>
<div class="colist arabic"><table>
<tr><td><img src="./images/icons/callouts/1.png" alt="1"></td><td>
Die Datenbank-Datei wird mit dem ersten Aufruf automatisch angelegt.<br>
    Keine Angabe für Benutzer und Passwort!
</td></tr>
</table></div>
<div class="listingblock">
<div class="title">config/database.yml: mysql</div>
<div class="content monospaced">
<pre>[...]
development:
  adapter: mysql
  database: jmyapp_development   <img src="./images/icons/callouts/1.png" alt="1">
  username: sid
  password: GEHEIM
  host: localhost
[...]</pre>
</div></div>
<div class="colist arabic"><table>
<tr><td><img src="./images/icons/callouts/1.png" alt="1"></td><td>
Der hier vorgeschlagene Datenbank-Name wird von <em>Ruby on Rails</em>
    automatisch aus dem Namen der Applikation und dem Zusatz <em>_development</em>
    gebildet.
</td></tr>
</table></div>
</div>
<div class="sect2">
<h3 id="_javascript_runtime_installieren">JavaScript-Runtime installieren</h3>
<div class="paragraph"><p>Für die erzeugte <em>Ruby on Rails</em>-Anwendung ist eine JavaScript-Runtime erforderlich.</p></div>
<div class="paragraph"><div class="title">Möglichkeit 1: Das RubyGem <em>therubyrhino</em></div><p><a href="http://rubygems.org/gems/therubyrhino">RubyGems.org: therubyrhino</a><br>
Embed the Mozilla Rhino JavaScript interpreter into Ruby.<br>
(Ist bereits installiert &#8230; siehe oben:)</p></div>
<div class="listingblock">
<div class="title">Möglichkeit 2: Das Ubuntu-Paket <em>nodejs</em> installieren</div>
<div class="content monospaced">
<pre>$ sudo apt-get install nodejs
Abhängigkeitsbaum wird aufgebaut
Statusinformationen werden eingelesen... Fertig
Die folgenden zusätzlichen Pakete werden installiert:
  libc-ares2 libev4 libv8-3.7.12.22
Die folgenden NEUEN Pakete werden installiert:
  libc-ares2 libev4 libv8-3.7.12.22 nodejs
0 aktualisiert, 4 neu installiert, 0 zu entfernen und 0 nicht aktualisiert.
Es müssen 2.099 kB an Archiven heruntergeladen werden.
Nach dieser Operation werden 6.400 kB Plattenplatz zusätzlich benutzt.
Möchten Sie fortfahren [J/n]?
[...]
nodejs (0.6.12~dfsg1-1ubuntu1) wird eingerichtet ...
update-alternatives: /usr/bin/node wird verwendet, um /usr/bin/js (js) im Auto-Modus bereitzustellen.
Trigger für libc-bin werden verarbeitet ...
ldconfig deferred processing now taking place</pre>
</div></div>
</div>
<div class="sect2">
<h3 id="_aufruf_der_webanwendung_im_browser_mit_der_ruby_implementation_1_9_3">Aufruf der Webanwendung im Browser (mit der Ruby Implementation 1.9.3)</h3>
<div class="paragraph"><p>WEBrick wird in <em>Ruby on Rails</em> default-mäßig als Testserver für die
Entwicklungs-Umgebung verwendet.</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>$ rails s
=&gt; Booting WEBrick
=&gt; Rails 3.2.13 application starting in development on http://0.0.0.0:3000    <img src="./images/icons/callouts/1.png" alt="1">
=&gt; Call with -d to detach
=&gt; Ctrl-C to shutdown server
[2013-06-02 13:50:13] INFO  WEBrick 1.3.1
[2013-06-02 13:50:13] INFO  ruby 1.9.3 (2013-05-16) [java]                    <img src="./images/icons/callouts/2.png" alt="2">
[2013-06-02 13:50:13] INFO  WEBrick::HTTPServer#start: pid=4730 port=3000</pre>
</div></div>
<div class="colist arabic"><table>
<tr><td><img src="./images/icons/callouts/1.png" alt="1"></td><td>
Der Webserver läuft ohne Port-Angabe (<em>--port</em> &#8230;) auf Port 3000.
</td></tr>
<tr><td><img src="./images/icons/callouts/2.png" alt="2"></td><td>
Ruby Version 1.9.3
</td></tr>
</table></div>
<div class="listingblock">
<div class="content monospaced">
<pre>Browser&gt; http://localhost:3000/   <img src="./images/icons/callouts/1.png" alt="1">
         About your application’s environment   <img src="./images/icons/callouts/2.png" alt="2"></pre>
</div></div>
<div class="colist arabic"><table>
<tr><td><img src="./images/icons/callouts/1.png" alt="1"></td><td>
Grundsätzlicher Test der Verbindung!
</td></tr>
<tr><td><img src="./images/icons/callouts/2.png" alt="2"></td><td>
Link zu weiteren Informationen&#8230;
</td></tr>
</table></div>
<div class="listingblock">
<div class="content monospaced">
<pre>Browser&gt; http://localhost:3000/rails/info/properties/   <img src="./images/icons/callouts/1.png" alt="1"></pre>
</div></div>
<div class="colist arabic"><table>
<tr><td><img src="./images/icons/callouts/1.png" alt="1"></td><td>
Informationen zur ausgeführten Applikation <em>MyApp</em>:<br>
   (Ruby-Version, RubyGems, Verzeichnis, Umgebung, Datenbank, Datenbank-Schema)
</td></tr>
</table></div>
<div class="paragraph"><p>oder</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>$ rake about</pre>
</div></div>
<div class="listingblock">
<div class="title">Ausgabe&#8230;</div>
<div class="content monospaced">
<pre>About your application's environment
Ruby version              1.9.3 (java)   <img src="./images/icons/callouts/1.png" alt="1">
RubyGems version          2.0.3
Rack version              1.4
Rails version             3.2.13
JavaScript Runtime        therubyrhino (Rhino)
Active Record version     3.2.13
Action Pack version       3.2.13
Active Resource version   3.2.13
Action Mailer version     3.2.13
Active Support version    3.2.13
Middleware
    ActionDispatch::Static,
    Rack::Lock,
    #&lt;ActiveSupport::Cache::Strategy::LocalCache::Middleware:0x3714dfe5&gt;,
    Rack::Runtime,
    Rack::MethodOverride,
    ActionDispatch::RequestId,
    Rails::Rack::Logger,
    ActionDispatch::ShowExceptions,
    ActionDispatch::DebugExceptions,
    ActionDispatch::RemoteIp,
    ActionDispatch::Reloader,
    ActionDispatch::Callbacks,
    ActiveRecord::ConnectionAdapters::ConnectionManagement,
    ActiveRecord::QueryCache,
    ActionDispatch::Cookies,
    ActionDispatch::Session::CookieStore,
    ActionDispatch::Flash, ActionDispatch::ParamsParser,
    ActionDispatch::Head, Rack::ConditionalGet,
    Rack::ETag,
    ActionDispatch::BestStandardsSupport
Application root                /home/sid/80/RailsDir/jMyApp
Environment                   development
Database adapter                mysql
Database schema version   0</pre>
</div></div>
<div class="colist arabic"><table>
<tr><td><img src="./images/icons/callouts/1.png" alt="1"></td><td>
Ruby Version 1.9.3 (java)
</td></tr>
</table></div>
</div>
<div class="sect2">
<h3 id="_webrick_benötigt_einen_patch">WEBrick benötigt einen Patch</h3>
<div class="paragraph"><p>In der Logdatei erzeugt der WebServer <em>WEBrick</em> Warnungen:</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>[...]
[2013-06-13 20:43:41] WARN  Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true


Started GET "/assets/rails.png" for 127.0.0.1 at 2013-06-13 20:43:41 +0200
Served asset /rails.png - 304 Not Modified (23ms)
[2013-06-13 20:43:41] WARN  Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true</pre>
</div></div>
<div class="paragraph"><p>Um die zusätzlichen Ausgaben zu verhindern, muß in der JRuby-Installation
der 204_304_keep_alive.patch eingearbeitet werden.</p></div>
<div class="paragraph"><p>&rarr; <a href="https://bugs.ruby-lang.org/attachments/2300/204_304_keep_alive.patch">https://bugs.ruby-lang.org/attachments/2300/204_304_keep_alive.patch</a></p></div>
<div class="listingblock">
<div class="title">current/lib/ruby/1.9/webrick/httpresponse.rb</div>
<div class="content"><!-- Generator: GNU source-highlight 3.1.5
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>      <span style="font-style: italic"><span style="color: #9A1900"># Keep-Alive connection.   <img src="./images/icons/callouts/1.png" alt="1"></span></span>
      <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #009900">@header</span><span style="color: #990000">[</span><span style="color: #FF0000">'connection'</span><span style="color: #990000">]</span> <span style="color: #990000">==</span> <span style="color: #FF0000">"close"</span>
         <span style="color: #009900">@keep_alive</span> <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">false</span></span>
      <span style="font-weight: bold"><span style="color: #0000FF">elsif</span></span> keep_alive?
        <span style="font-style: italic"><span style="color: #9A1900">#if chunked? || @header['content-length']   <img src="./images/icons/callouts/2.png" alt="2"></span></span>
        <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> chunked? <span style="color: #990000">||</span> <span style="color: #009900">@header</span><span style="color: #990000">[</span><span style="color: #FF0000">'content-length'</span><span style="color: #990000">]</span> <span style="color: #990000">||</span> <span style="color: #009900">@status</span> <span style="color: #990000">==</span> <span style="color: #993399">304</span> <span style="color: #990000">||</span> <span style="color: #009900">@status</span> <span style="color: #990000">==</span> <span style="color: #993399">204</span>   <span style="color: #FF0000"><img src="./images/icons/callouts/3.png" alt="3"></span>
          <span style="color: #009900">@header</span><span style="color: #990000">[</span><span style="color: #FF0000">'connection'</span><span style="color: #990000">]</span> <span style="color: #990000">=</span> <span style="color: #FF0000">"Keep-Alive"</span>
        <span style="font-weight: bold"><span style="color: #0000FF">end</span></span>
      <span style="font-weight: bold"><span style="color: #0000FF">else</span></span>
        <span style="color: #009900">@header</span><span style="color: #990000">[</span><span style="color: #FF0000">'connection'</span><span style="color: #990000">]</span> <span style="color: #990000">=</span> <span style="color: #FF0000">"close"</span>
      <span style="font-weight: bold"><span style="color: #0000FF">end</span></span></tt></pre></div></div>
<div class="colist arabic"><table>
<tr><td><img src="./images/icons/callouts/1.png" alt="1"></td><td>
Zeile 150
</td></tr>
<tr><td><img src="./images/icons/callouts/2.png" alt="2"></td><td>
Kommentarzeichen setzen
</td></tr>
<tr><td><img src="./images/icons/callouts/3.png" alt="3"></td><td>
Neue Zeile mit zusätzlichen Bedingungen
</td></tr>
</table></div>
</div>
</div>
</div>
</div>
<div id="footnotes"><hr></div>
<div id="footer">
<div id="footer-text">
Last updated 2013-06-13 21:32:48 CEST
</div>
</div>
</body>
</html>
