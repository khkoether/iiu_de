Installation in Ubuntu: OpenJDK 7, Oracle JDK 7
===============================================
Karl-Heinz Köther <&#107;&#104;&#107;&#111;&#101;&#116;&#104;&#101;&#114;&#064;&#107;&#097;&#104;&#119;&#101;&#098;&#046;&#100;&#101;>

:icons:
:Author Initials: KHK
:creativecommons-url: http://creativecommons.org/licenses/by-sa/3.0/de/
:ubuntu-url: http://www.ubuntu.com/
:asciidoc-url: http://www.methods.co.nz/asciidoc/
:git-url: http://git-scm.com/
:git-download-url: http://code.google.com/p/git-core/downloads/list
:ruby-url: http://www.ruby-lang.org/
:ruby-download-url: http://www.ruby-lang.org/de/downloads/
:ruby-ftp: ftp://www.ruby-lang.org/pub/ruby/1.9/
:rubyonrails-url: http://www.rubyonrails.org
:java-url: http://www.oracle.com/technetwork/java/javase/downloads/index.html

:plugins-url: about:plugins
:java-koerper-url: http://www.arndt-bruenner.de/mathe/java/koerper3d.htm


Version 1.8.0, April 2013, <<_changelog,[Changelog]>>


Abstract
--------
Dieser Artikel ist eine Sammlung von Hinweisen zur Installation 
eines Java Development Kit unter GNU/Linux.
 
Der Artikel ist in {asciidoc-url}[ASCII DOC] erstellt worden.

[CAUTION]
====
Zu beachten ist, dass so ein Dokument zum Einen nie abschliessend 
sein kann, und zum Anderen bestimmte Konfigurationen anders, oder 
auf einem anderem Weg durchgeführt werden können. +
Gerne nehme ich Verbesserungsvorschläge entgegen.

Es gilt wie immer: Verwendung der Anleitung auf eigene Gefahr.
====


Vorraussetzungen
----------------
Die Installation wird für {ubuntu-url}[Ubuntu 12.04 LTS (Precise Pangolin)] 
beschrieben. +
Gleichwohl sind die einzelnen Schritte auch für 
andere Distributionen übertragbar.

[TIP]
====
In Ubuntu 12.04 LTS (Precise Pangolin) kann über bestehende Abhängigkeiten +
zu anderen Ubuntu-Paketen bereits das _OpenJDK 6_ installiert sein.

----
$ dpkg --list | grep openjdk  
ii  openjdk-6-jdk              6b24-1.11.5-0ubuntu1~12.04.1   OpenJDK Development Kit (JDK)
ii  openjdk-6-jre              6b24-1.11.5-0ubuntu1~12.04.1   OpenJDK Java runtime, ...
ii  openjdk-6-jre-headless     6b24-1.11.5-0ubuntu1~12.04.1   OpenJDK Java runtime, ...
ii  openjdk-6-jre-lib          6b24-1.11.5-0ubuntu1~12.04.1   OpenJDK Java runtime (...)
----
====


Wahlmöglichkeiten
-----------------
.OpenJDK 7 .vs Oracle JDK 7
Für Java steht eine gute OpenSource-Anwendung zur Verfügung: das _OpenJDK 7_ und
das _IcedTea-Plugin_ für den Browser. Sie sind erhältlich in den regulären 
Ubuntu-Repositories und erhalten regelmäßig Sicherheits-Updates.
Für viele Menschen ist dieses Java ausreichend.

Das ist mit ein Grund warum das ClosedSource Oracle Java von den offiziellen
Software-Repositories entfernt wurde. 

Ein weiterer Grund war natürlich auch, das Oracle die 
_Operating System Distributor License for Java (DLJ)_ zurückgezog.

&rarr; link:http://sites.google.com/site/easylinuxtipsproject/java#TOC-Primary-choice:-OpenJDK-6-and-not-Oracle-Sun-Java[Oracle (Sun) Java JRE for Ubuntu, Linux Mint and Debian]

[NOTE]
====
Unabhängig davon, das die Firma _Oracle_ das freie _JDK_ unterstützt und auch
vorantreibt ... gibt es durchaus Bugs, die in den propietären Paketen nicht 
vorhanden sind. +
Es gilt, Bugs zu melden, damit _OpenJDK_ ebenso gut wird.
====

[NOTE]
====
OpenJDK 6 ist die ältere Version, was aber nicht heißen soll, dass sie veraltet ist. 
OpenJDK 7 ist aktueller, aber im Gegensatz zum Vorgänger nicht für alle 
Ubuntu-Versionen verfügbar. Wer kann, sollte sich für OpenJDK 7 entscheiden - 
solange ein spezieller Anwendungszweck wie beispielsweise _ElsterOnline_ nicht 
dagegen spricht.

&rarr; link:http://wiki.ubuntuusers.de/Java[ubunutusers.de: Java]
====

[CAUTION]
====
Ich habe mich entschlossen das vorhandende _OpenJDK 6_ durch _OpenJDK 7_ zu ersetzen. 
Das muß nicht von Ihnen gemacht werden! 
Wenn Sie sich entscheiden _OpenJDK 7_ zusätzlich zu installieren, 
müssen sie aber die von Ihnen gewünschte Version als systemweiten Standard setzen.

&rarr; http://wiki.ubuntuusers.de/Java/Tipps#Verwendete-Java-Version-einstellen[ubuntuusers.de: Tipps - Verwendete Java-Version einstellen]
====

Installation: OpenJDK 7
-----------------------
----
$ sudo apt-get remove openjdk-6-jre openjdk-6-jdk openjdk-6-jre-headless openjdk-6-jre-lib  <1>
Abhängigkeitsbaum wird aufgebaut
[...]
Die folgenden Pakete wurden automatisch installiert und werden nicht mehr benötigt:
  libsm-dev libdb5.1-java-gcj libdb-je-java libice-dev libgcj-bc libpthread-stubs0 libjtidy-java
  libicu4j-java libcommons-beanutils-java libdb-java javahelp2 libcommons-compress-java x11proto-kb-dev
  libdb5.1-java xtrans-dev ant x11proto-input-dev ant-optional libxt-dev libxau-dev
  libswing-layout-java libregexp-java xorg-sgml-doctools liblucene2-java libx11-dev
  libcommons-collections3-java libx11-doc libxcb1-dev libcommons-digester-java x11proto-core-dev
  libxdmcp-dev libpthread-stubs0-dev
Verwenden Sie »apt-get autoremove«, um sie zu entfernen.
Die folgenden zusätzlichen Pakete werden installiert:
  icedtea-7-jre-jamvm openjdk-7-jre openjdk-7-jre-headless openjdk-7-jre-lib
Vorgeschlagene Pakete:
  icedtea-7-plugin sun-java6-fonts fonts-ipafont-gothic fonts-ipafont-mincho ttf-telugu-fonts
  ttf-oriya-fonts ttf-kannada-fonts ttf-bengali-fonts
Die folgenden Pakete werden ENTFERNT:
  icedtea-6-jre-cacao icedtea-6-jre-jamvm icedtea-netx openjdk-6-jdk openjdk-6-jre
  openjdk-6-jre-headless openjdk-6-jre-lib pauker
Die folgenden NEUEN Pakete werden installiert:
  icedtea-7-jre-jamvm openjdk-7-jre openjdk-7-jre-headless openjdk-7-jre-lib
0 aktualisiert, 4 neu installiert, 8 zu entfernen und 0 nicht aktualisiert.
[...]
----
<1> Die vier zu entfernenden Pakete werden für das System mit vier _7_-Pakete ersetzt! +
    _icedtea-7-jre-jamvm_ _openjdk-7-jre_ _openjdk-7-jre-headless_ _openjdk-7-jre-lib_

----
$ sudo apt-get autoremove  <1>
Statusinformationen werden eingelesen... Fertig
Die folgenden Pakete werden ENTFERNT:
  ant ant-optional icedtea-netx-common javahelp2 libcommons-beanutils-java libcommons-collections3-java
  libcommons-compress-java libcommons-digester-java libdb-java libdb-je-java libdb5.1-java
  libdb5.1-java-gcj libgcj-bc libice-dev libicu4j-java libjtidy-java liblucene2-java libpthread-stubs0
  libpthread-stubs0-dev libregexp-java libsm-dev libswing-layout-java libx11-dev libx11-doc libxau-dev
  libxcb1-dev libxdmcp-dev libxt-dev x11proto-core-dev x11proto-input-dev x11proto-kb-dev
  xorg-sgml-doctools xtrans-dev
0 aktualisiert, 0 neu installiert, 33 zu entfernen und 0 nicht aktualisiert.
[...]
----    
<1> Die automatisch installierten Pakete (s. o.) werden entfernt!

----
$ sudo apt-get install icedtea-7-plugin  <1>
Paketlisten werden gelesen... Fertig
Abhängigkeitsbaum wird aufgebaut       
Statusinformationen werden eingelesen... Fertig
Die folgenden zusätzlichen Pakete werden installiert:
  icedtea-netx icedtea-netx-common
Die folgenden NEUEN Pakete werden installiert:
  icedtea-7-plugin icedtea-netx icedtea-netx-common
0 aktualisiert, 3 neu installiert, 0 zu entfernen und 0 nicht aktualisiert.
[...]
----    
<1> Sie müssen entscheiden ob Sie erneut das Java-Plugin für den Browser installieren, 
    oder aus Sicherheitsgründen darauf verzichten...!?
    
----
$ sudo apt-get install openjdk-7-jdk  <1>
Paketlisten werden gelesen... Fertig
Abhängigkeitsbaum wird aufgebaut       
Statusinformationen werden eingelesen... Fertig
Die folgenden zusätzlichen Pakete werden installiert:
  libice-dev libpthread-stubs0 libpthread-stubs0-dev libsm-dev libx11-dev libx11-doc libxau-dev
  libxcb1-dev libxdmcp-dev libxt-dev x11proto-core-dev x11proto-input-dev x11proto-kb-dev
  xorg-sgml-doctools xtrans-dev
Vorgeschlagene Pakete:
  libxcb-doc openjdk-7-demo openjdk-7-source visualvm
Die folgenden NEUEN Pakete werden installiert:
  libice-dev libpthread-stubs0 libpthread-stubs0-dev libsm-dev libx11-dev libx11-doc libxau-dev
  libxcb1-dev libxdmcp-dev libxt-dev openjdk-7-jdk x11proto-core-dev x11proto-input-dev x11proto-kb-dev
  xorg-sgml-doctools xtrans-dev
0 aktualisiert, 16 neu installiert, 0 zu entfernen und 0 nicht aktualisiert.
[...]
----    
<1> Ein Teil der oben entfernten Pakete finden sich hier zur erneuten Installation wieder ;-)

----
$ java -version
java version "1.7.0_25"
OpenJDK Runtime Environment (IcedTea 2.3.10) (7u25-2.3.10-1ubuntu0.12.04.2)
OpenJDK 64-Bit Server VM (build 23.7-b01, mixed mode)
----   

 
Installation: Oracle JDK
------------------------
Wie auch immer, einige Ubuntu-Anwender benötigen das Oracle JDK. +
Empfohlen wird die jeweils neueste Version - zu diesem Zeitpunkt ist das: 
_Java SE Development Kit 7u17_.

Zusätzliche Software-Pakete  
sollten im Verzeichnis '/opt' (Optional) installiert werden. 

*Step 0:* Download JDK 7u40

&rarr; {java-url}[Oracle: Java SE Downloads]

[NOTE]
====
You must accept the Oracle Binary Code License Agreement 
for Java SE to download this software.
====

*Step 1:* Installation im Verzeichnis '/opt/Java' (mit Benutzer 'root')
----
$ sudo mkdir /opt/Java && cd /opt/Java 

$ ls -l
-rw-rw-r-- 1 sid sid 96160926 Apr  14 13:28 jdk-7u40-linux-x64.tar.gz

$ sudo tar xvzf jdk-7u40-linux-x64.tar.gz
[...]
----

Ein Vorteil bei der gezeigten Lösung ist, daß für das Einspielen einer neuen Version 
weder die Konfigurations-Datei noch die 'PATH'-Variable angepasst werden müssen.  
----
$ cd /opt/Java
$ sudo chown -R root.root jdk1.7.0_40
$ sudo ln -s jdk1.7.0_40 current
$ ls -l
lrwxrwxrwx 1 root root   11 Okt  9 09:19 current -> jdk1.7.0_40
drwxr-xr-x 8 root root 4096 Aug 27 09:24 jdk1.7.0_40
----

*Step 2:* Java-Pfad setzen (von au&szlig;en)
Erstellen Sie eine Datei java.path.sh (siehe <<_anhang,[Anhang]>>). 
[NOTE] 
=========================================================
Achtung: Ausführen der Datei mit dem Punkt-Operator!
----
$ . jruby.path.sh
---- 
=========================================================

*Step 3:* Installation verifizieren
---- 
$ which java
/opt/Java/current/bin/java

$ java -version
java version "1.7.0_40"
Java(TM) SE Runtime Environment (build 1.7.0_40-b43)
Java HotSpot(TM) 64-Bit Server VM (build 24.0-b56, mixed mode)
----


Java im Browser
---------------
Überprüfen Sie die im Browser installierten _Plugins_:

* Mozilla Firefox +
  +about:plugins+
* Chromium +
  +chrome://plugins/+

Beide Browser greifen bei mir auf das _IcedTea-Web Plugin_ zu: +
+IcedTea-Web Plugin (using IcedTea-Web 1.2.3 (1.2.3-0ubuntu0.12.04.3))+

+++ <br /> +++
  
Mit den folgenden Links können Sie zum Einen die im Browser verwendete
Java-Version bestimmen, zum Anderem die Funktionsfähigkeit des Plugin
überprüfen oder -- halt die aktuelle Zeit anzeigen:

* http://javatester.org/[Java Tester] +
  Test the version of Java your browser is using
* http://www.arndt-bruenner.de/mathe/java/[Testseiten für Java-Applets - von Arndt Brünner] +
  Platonische und Archimedische Körper (mein Favorit ;-)
* http://www.w3.org/2000/07/8378/object/java/clock[W3C: Java applet test with applet and object] +
  W3C host clocks: MIT, UTC, INRIA, Keio

+++ <br /> +++

Darüberhinaus sollten Sie die Hinweise zur Sicherheit von Browsern überhaupt 
und die mit _Java_ im Besonderen immer im Blick haben... + 

* http://www.heise.de/security/hilfe/[heise Security: Erste Hilfe] +
  *Browsercheck*: Java, JavaScript/JScript, Visual Basic Script, ActiveX,
  Cookies, XPI-Erweiterungen, Phishing
  

Anhang
------
.Script zum Setzen der Umgebung für das JDK (ohne weitere Erläuterung)
----
JAVA_BINDIR=/opt/Java/current/bin
JAVA_HOME=/opt/Java/current
JDK_HOME=/opt/Java/current
JRE_HOME=/opt/Java/current

PATH=$JAVA_BINDIR:$PATH

export JAVA_BINDIR
export JAVA_HOME
export JDK_HOME
export JRE_HOME
export PATH
----
